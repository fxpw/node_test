# Документация для Makefile

## Команды

### Общие команды
- `make all` - выполняет действия, определенные в целях `build` и `start`.
- `make build` - строит Docker-образы.
- `make build_no_cache` - строит Docker-образы без использования кэша.
- `make stop` - останавливает и удаляет контейнеры.
- `make down` - останавливает и удаляет контейнеры.

### Рабочие команды
- `make run` - запускает контейнеры в фоновом режиме.
- `make up` - запускает контейнеры в фоновом режиме.
- `make start` - запускает контейнеры в фоновом режиме.
- `make build_start` - строит Docker-образы.

### Миграции
- `make m_make` - создает миграцию с именем, определенным переменной `MIGRATION_NAME`.
- `make m_migrate` - выполняет миграции базы данных.
- `make m_undo` - отменяет последнюю миграцию.
- `make m_undo_all` - отменяет все миграции.

### Сидеры
- `make s_create` - создает сидер с именем, определенным переменной `SEEDER_NAME`.
- `make s_all` - выполняет все сидеры.
- `make s_seed` - выполняет указанный сидер.
- `make s_undo` - отменяет выполнение последнего сидера.

### Проверка подключения к базе данных
- `make d_check_db_connection` - проверяет состояние контейнера MySQL.

## Переменные
- `current_date` - текущее время в формате `YYYYMMDDHHMMSS`.
- `MIGRATION_NAME` - имя миграции, сгенерированное на основе переменной `m` и `current_date`.
- `SEEDER_NAME` - имя сидера, сгенерированное на основе переменной `s` и `current_date`.

## Примеры использования
```sh
make build      # постройте Docker-образы
make run        # запустите контейнеры
make m_migrate  # выполните миграции
make s_all      # выполните все сидеры
make d_check_db_connection  # проверьте состояние подключения к базе данных
